#!/bin/bash
FLASH_DIR="/usr/lib/flashplugin-installer"
FLASH_VERSION="flashplayer_11_plugin_debug.i386"
FLASH_DEBUG_FILE="http://fpdownload.macromedia.com/pub/flashplayer/updaters/11/$FLASH_VERSION.tar.gz"
PLAYER="libflashplayer.so"
DEBUG_PLAYER="libflashplayer.debug.so"
NON_DEBUG_PLAYER="libflashplayer.non-debug.so"

cd $HOME
if [ ! -d "$HOME/tmp" ]; then
  mkdir "$HOME/tmp"
fi  
  
cd "$HOME/tmp"
wget $FLASH_DEBUG_FILE
tar -xf "$FLASH_VERSION.tar.gz"
sudo cp "$PLAYER" "$FLASH_DIR/$DEBUG_PLAYER"
cd "$FLASH_DIR"

# this allows us to easily switch between debugger/non-debugger versions of flash
if [ -f "$PLAYER" ]; then
  sudo mv "$PLAYER" "$NON_DEBUG_PLAYER"
  sudo rm "$PLAYER"
fi

sudo ln -s "$DEBUG_PLAYER" "$PLAYER"
sudo nspluginwrapper -i "$PLAYER"
